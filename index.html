<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <style>
        body {
            margin: 15px auto;
            width: 500px;
            height: 550px;
            border: 1px solid red;
            text-align: center;
            border-radius: 25px;
        }
    </style>



    <h3>Fai la tua scelta!</h3>

    <button id='1'>Rock</button>
    <button id='2'>Paper</button>
    <button id='3'>Scissors</button>



    <script>
        
        function computerPlay() {
            let random = Math.floor(Math.random() * 3) + 1;
            switch (random) {
                case 1:
                return "paper";
                break;
                case 2:
                return "rock";
                break;
                case 3:
                return "scissors";
                break;

            }
        }

        let computerPoints = 0;
        var playerPoints = 0;
        var playerSelection;
        let computerSelection;
        let count = 0;


       let containerDiv = document.createElement('div');
       let userScore = document.createElement('p');
       let compScore = document.createElement('p');
       let bodyElement = document.querySelector("body");
       let pareggioVintoPerso = document.createElement('p');
       let vincente = document.createElement('p');
    //    let persoRound = document.createElement('p');
       containerDiv.appendChild(userScore);
       containerDiv.appendChild(compScore);
       bodyElement.appendChild(containerDiv);
       containerDiv.appendChild(pareggioVintoPerso);
       containerDiv.appendChild(vincente);
       pareggioVintoPerso.setAttribute('style','font-size: 30px; background-color: yellow; margin: 20px');
       vincente.setAttribute('style','font-size: 40px; background-color: orange; margin: 10px');


        const buttoN = document.querySelectorAll('button');        

        buttoN.forEach(button => button.addEventListener('click', function() {
            playerSelection = button.innerText;
            playerSelection = playerSelection.toLowerCase();      
            playRound(playerSelection,computerSelection);
            vincente.textContent = '';


            if (count >= 5) {
                sceltaDelVincitore();
                compScore.textContent = "Punteggio computer: " + 0;
                userScore.textContent = "Punteggio Giocatore: " + 0;
                computerPoints = 0;
                playerPoints = 0;
                count = 0;
                
                
            } 

        }));
             
        
        function playRound(playerSelection, computerSelection) {
             computerSelection = computerPlay();
            
            if (playerSelection === computerSelection) 
            {
                
                pareggioVintoPerso.textContent = 'Avete pareggiato!';

            } else if (playerSelection === "rock" && computerSelection === "paper" || playerSelection === "scissors" && computerSelection === "rock" || playerSelection === "paper" && computerSelection === "scissors")
                {
                    
                    pareggioVintoPerso.textContent = `You lose! ${computerSelection}   beat ${playerSelection}!`;
                    count++;
                    computerPoints++;
                    compScore.textContent = "Punteggio computer: " + computerPoints;
                }
              else if (playerSelection === "scissors" && computerSelection === "paper" || playerSelection === "rock" && computerSelection === "scissors" || playerSelection === "paper" && computerSelection === "rock")
                {
                    
                    pareggioVintoPerso.textContent = `You win! ${playerSelection} beat ${computerSelection}!`;
                    count++;
                    playerPoints++;
                    userScore.textContent = "Punteggio Giocatore: " + playerPoints;
                    
                }  
              else     
                {
                    alert("You choose something else");
                }
        }


        

          

        function sceltaDelVincitore() {
            let vincitore = playerPoints > computerPoints ? 
         vincente.textContent = `Hai vinto con ${playerPoints} punti contro ${computerPoints} punti`:
         vincente.textContent = `hai perso con un punteggio di ${playerPoints} 
        contro il punteggio del computer di ${computerPoints}`;
        
        
        }

        
       


    </script>
</body>
</html>